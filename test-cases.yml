---
- summary: |
    Проверка возможности зарегистрироваться с использованием почты
  requirement: |
    При вводе уникального логина, почты, пароля и повтора пароля происходит регистрация пользователя
  prerequisites: |
    Открыта страница регистрации Sign up
  test-data: |
    Nickname = fretka Email = potemkina.qa@gmail.com  Password = 123456 Password confirmation = 123456
  steps:
    - Вводим nickname
    - Вводим email
    - Вводим password
    - Подтверждаем пароль
    - Нажимаем кнопку "Submit"
  expected-result: |
    Пользователь должен попасть на главную страницу под своим аккаунтом

- summary: |
    Проверка возможности повторно зарегистрироваться с использованием почты (негативный ТК)
  requirement: |
    При повторном использовании почты при регистрации, пользователь должен получить сообщение об ошибке
  prerequisites:
    Открыта страница регистрации Sign up
  test-data: |
    Nickname = fretka2 Email = potemkina.qa@gmail.com  Password = 1234567 Password confirmation = 1234567
  steps:
    - Вводим nickname
    - Вводим email
    - Вводим password
    - Подтверждаем пароль
    - Нажимаем кнопку "Submit"
  expected-result: |
    Пользователь должен получить сообщение об ошибке, что такой Email уже используется

- summary: |
    Проверка оставления полей nickname, email, password, password confirmation пустыми при регистрации с использованием почты (негативный ТК)
  requirement: |
    При оставлении полей nickname, email, password, password confirmation пустыми, пользователь должен получить сообщение об ошибке по каждому незаполненному полю
  prerequisites:
    Открыта страница регистрации Sign up
  test-data: |
    Поля для заполнения оставляем пустыми
  steps:
    - Нажимаем кнопку "Submit"
  expected-result: |
    Пользователь должен получить сообщение об ошибке по каждому незаполненному полю

- summary: |
    Проверка авторизации пользователя с использованием почты
  requirement: |
    При вводе почты, пароля происходит авторизация пользователя
  prerequisites: |
    Открыта страница регистрации Sign in
  test-data: |
    Email = potemkina.qa@gmail.com  Password = 12345678
  steps:
    - Вводим Email
    - Вводим Password
    - Нажимаем кнопку "Submit"
  expected-result: |
    Пользователь авторизован и перенаправлен на главную страницу

- summary: |
    Проверка восстановления пароля
  requirement: |
    Будучи зарегистрированным, пользователь должен иметь возможность восстановить пароль 
  prerequisites:
    Открыта страница авторизации "Sign in"
  test-data: |
    no data
  steps:
    - Нажимаем "Forgot your password?"
    - Вводим зарегистрированный Email
    - Нажимаем кнопку "Submit"
    - В пришедшем письме о смене пароля переходим по ссылке на Codebattle
    - В открывшемся окне Reset your password вводим новый пароль, нажимаем "Save"
    - Нажимаем на кнопку "Sign in"
    - Вводим зарегистрированный Email, новый пароль и нажимаем кнопку "Submit"
  expected-result: |
    Пользователь восстановил пароль, авторизовался и перенаправлен на главную страницу

- summary: |
    Проверка авторизации пользователя с использованием аккаунта на Github, Discord
  requirement: |
 Пользователь может авторизоваться используя аккаунты на Github, Discord
  prerequisites:
    Открыта страница регистрации Sign up / Sign in
  test-data: |
    Поля для заполнения оставляем пустыми
  steps:
    - Нажимаем кнопку "Sign in with Github" или "Sign in with Discord"
  expected-result: |
    Происходит авторизация с использованием данных Github или Discord

- summary: |
    Проверка создания игры с ботом
  requirement: |
    Пользователь может начать игру с ботом
  prerequisites:
    Пользователь авторизован
  test-data: |
    no data
  steps:
    - Нажимаем кнопку "Create a game"
    - В "Level" выбираем уровень сложности
    - В "Game Type" выбираем "With a bot"
    - В "Time control" выставляем время игры
    - В "Choose task by name or tags" выбираем задание или тэг
    - Нажимаем кнопку "Create a battle"
  expected-result: |
    Запускается игра с ботом

- summary: |
    Проверка создания игры с другим реальным пользователем
  requirement: |
    Пользователь может начать игру с другим реальным пользователем
  prerequisites:
    Пользователь авторизован
  test-data: |
    no data
  steps:
    - Нажимаем кнопку "Create a game"
    - В "Level" выбираем уровень сложности
    - В "Game Type" выбираем "With other user"
    - В "Time control" выставляем время игры
    - В "Choose task by name or tags" выбираем задание или тэг
    - Нажимаем кнопку "Create a battle"
  expected-result: |
    Запускается игра с другим пользователем

- summary: |
    Проверка создания игры с другом
  requirement: |
    Пользователь может начать игру с другом
  prerequisites:
    Пользователь авторизован
  test-data: |
    no data
  steps:
    - Нажимаем кнопку "Create a game"
    - В "Level" выбираем уровень сложности
    - В "Game Type" выбираем "With a friend"
    - В "Time control" выставляем время игры
    - В "Choose opponent" вводим potemkina-e, в выпадающем списке выбираем соответствующего пользователя
    - В "Choose task by name or tags" выбираем задание или тэг
    - Нажимаем кнопку "Create invite"
    - У пользователя potemkina-e появляется приглашение, нажимаем Accept
    - Игра автоматически запускается у обоих пользователей
  expected-result: |
    Запускается игра у обоих пользователей

- summary: |
    Проверка возможности видеть код соперника в реальном времени
  requirement: |
    Пользователь видит код соперника в реальном времени
  prerequisites:
    Пользователь авторизован
    Начата игра с другом
  test-data: |
    no data
  steps:
    Соперник (наш второй аккаунт) набирает код в своем окне
  expected-result: |
    Пользователь в реальном времени видит код соперника

- summary: |
    Проверка возможности быть зрителем в запущенной игре
  requirement: |
    Пользователь заходит в игру в качестве зрителя
  prerequisites:
    Пользователь авторизован
  test-data: |
    no data
  steps:
    На главной странице в разделе Lobby при запущенной игре нажимаем на кнопку "Show"
  expected-result: |
    Пользователь в качестве зрителя наблюдает за игрой