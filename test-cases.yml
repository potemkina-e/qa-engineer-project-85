---
- summary: |
    Проверка возможности зарегистрироваться с использованием почты
  requirement: |
    При вводе уникального логина, почты, пароля и повтора пароля происходит регистрация пользователя
  prerequisites: |
    Открыта страница регистрации Sign up
  test-data: |
    Nickname = fretka Email = potemkina.qa@gmail.com  Password = 123456 Password confirmation = 123456
  steps:
    - Вводим nickname
    - Вводим email
    - Вводим password
    - Подтверждаем пароль
    - Нажимаем кнопку "Submit"
  expected-result: |
    Пользователь должен попасть на главную страницу под своим аккаунтом

- summary: |
    Проверка возможности повторно зарегистрироваться с использованием почты (негативный ТК)
  requirement: |
    При повторном использовании почты при регистрации, пользователь должен получить сообщение об ошибке
  prerequisites:
    Открыта страница регистрации Sign up
  test-data: |
    Nickname = fretka2 Email = potemkina.qa@gmail.com  Password = 1234567 Password confirmation = 1234567
  steps:
    - Вводим nickname
    - Вводим email
    - Вводим password
    - Подтверждаем пароль
    - Нажимаем кнопку "Submit"
  expected-result: |
    Пользователь должен получить сообщение об ошибке, что такой Email уже используется

- summary: |
    Проверка оставления полей nickname, email, password, password confirmation пустыми при регистрации с использованием почты (негативный ТК)
  requirement: |
    При оставлении полей nickname, email, password, password confirmation пустыми, пользователь должен получить сообщение об ошибке по каждому незаполненному полю
  prerequisites:
    Открыта страница регистрации Sign up
  test-data: |
    Поля для заполнения оставляем пустыми
  steps:
    - Нажимаем кнопку "Submit"
  expected-result: |
    Пользователь должен получить сообщение об ошибке по каждому незаполненному полю

- summary: |
    Проверка валидации почтового ящика при регистрации
  requirement: |
    При регистрации должна происходить валидация почтового ящика, путем направления письма со ссылкой-подтверждением 
  prerequisites:
    Открыта страница регистрации Sign up
  test-data: |
    Nickname = test0 
    Email = t@t.tt  
    Password = 123456 
    Password confirmation = 123456
  steps:
    - Вводим nickname
    - Вводим email
    - Вводим password
    - Подтверждаем пароль
    - Нажимаем кнопку "Submit"
  expected-result: |
    На указанный адрес электронной почты приходит ссылка о завершении регистрации

- summary: |
    Проверка авторизации пользователя с использованием почты
  requirement: |
    При вводе почты, пароля происходит авторизация пользователя
  prerequisites: |
    Открыта страница регистрации Sign in
  test-data: |
    Email = potemkina.qa@gmail.com  Password = 12345678
  steps:
    - Вводим Email
    - Вводим Password
    - Нажимаем кнопку "Submit"
  expected-result: |
    Пользователь авторизован и перенаправлен на главную страницу

- summary: |
    Проверка восстановления пароля
  requirement: |
    Будучи зарегистрированным, пользователь должен иметь возможность восстановить пароль 
  prerequisites:
    Открыта страница авторизации "Sign in"
  test-data: |
    no data
  steps:
    - Нажимаем "Forgot your password?"
    - Вводим зарегистрированный Email
    - Нажимаем кнопку "Submit"
    - В пришедшем письме о смене пароля переходим по ссылке на Codebattle
    - В открывшемся окне Reset your password вводим новый пароль, нажимаем "Save"
    - Нажимаем на кнопку "Sign in"
    - Вводим зарегистрированный Email, новый пароль и нажимаем кнопку "Submit"
  expected-result: |
    Пользователь восстановил пароль, авторизовался и перенаправлен на главную страницу

- summary: |
    Проверка авторизации пользователя с использованием аккаунта на Github, Discord
  requirement: |
 Пользователь может авторизоваться используя аккаунты на Github, Discord
  prerequisites:
    Открыта страница регистрации Sign up / Sign in
  test-data: |
    Поля для заполнения оставляем пустыми
  steps:
    - Нажимаем кнопку "Sign in with Github" или "Sign in with Discord"
  expected-result: |
    Происходит авторизация с использованием данных Github или Discord

- summary: |
    Проверка создания игры с ботом
  requirement: |
    Пользователь может начать игру с ботом
  prerequisites:
    Пользователь авторизован
  test-data: |
    no data
  steps:
    - Нажимаем кнопку "Create a game"
    - В "Level" выбираем уровень сложности
    - В "Game Type" выбираем "With a bot"
    - В "Time control" выставляем время игры
    - В "Choose task by name or tags" выбираем задание или тэг
    - Нажимаем кнопку "Create a battle"
  expected-result: |
    Запускается игра с ботом

- summary: |
    Проверка создания игры с другим реальным пользователем
  requirement: |
    Пользователь может начать игру с другим реальным пользователем
  prerequisites:
    Пользователь авторизован
  test-data: |
    no data
  steps:
    - Нажимаем кнопку "Create a game"
    - В "Level" выбираем уровень сложности
    - В "Game Type" выбираем "With other user"
    - В "Time control" выставляем время игры
    - В "Choose task by name or tags" выбираем задание или тэг
    - Нажимаем кнопку "Create a battle"
  expected-result: |
    Запускается игра с другим пользователем

- summary: |
    Проверка создания игры с другим реальным пользователем с помощью ссылки
  requirement: |
    Пользователь может начать игру с другим реальным пользователем с помощью ссылки
  prerequisites:
    Пользователь авторизован
  test-data: |
    no data
  steps:
    - Нажимаем кнопку "Create a game"
    - В "Level" выбираем уровень сложности
    - В "Game Type" выбираем "With other user"
    - В "Time control" выставляем время игры
    - В "Choose task by name or tags" выбираем задание или тэг
    - Нажимаем кнопку "Create a battle"
    - В строке с появившейся игрой копируем ссылку на игру, отправляем другому пользователю
    - Другой пользователь проходит по ссылке, игра начинается
  expected-result: |
    Запускается игра с другим пользователем

- summary: |
    Проверка создания игры с другом
  requirement: |
    Пользователь может начать игру с другом
  prerequisites:
    Пользователь авторизован
  test-data: |
    no data
  steps:
    - Нажимаем кнопку "Create a game"
    - В "Level" выбираем уровень сложности
    - В "Game Type" выбираем "With a friend"
    - В "Time control" выставляем время игры
    - В "Choose opponent" вводим potemkina-e, в выпадающем списке выбираем соответствующего пользователя
    - В "Choose task by name or tags" выбираем задание или тэг
    - Нажимаем кнопку "Create invite"
    - У пользователя potemkina-e появляется приглашение, нажимаем Accept
    - Игра автоматически запускается у обоих пользователей
  expected-result: |
    Запускается игра у обоих пользователей

- summary: |
    Проверка возможности видеть код соперника в реальном времени
  requirement: |
    Пользователь видит код соперника в реальном времени
  prerequisites:
    Пользователь авторизован
    Начата игра с другом
  test-data: |
    no data
  steps:
    Соперник (наш второй аккаунт) набирает код в своем окне
  expected-result: |
    Пользователь в реальном времени видит код соперника

- summary: |
    Проверка возможности быть зрителем в запущенной игре
  requirement: |
    Пользователь заходит в игру в качестве зрителя
  prerequisites:
    Пользователь авторизован
  test-data: |
    no data
  steps:
    На главной странице в разделе Lobby при запущенной игре нажимаем на кнопку "Show"
  expected-result: |
    Пользователь в качестве зрителя наблюдает за игрой

- summary: |
    Проверка выбора игры по уровню сложности
  requirement: |
    Пользователь может выбрать сложность игры
  prerequisites:
    Пользователь авторизован
  test-data: |
    no data
  steps:
    - Нажимаем кнопку "Create a game"
    - В "Level" выбираем уровень сложности
    - В "Game Type" выбираем "With a bot"
    - В "Time control" выставляем время игры
    - В "Choose task by name or tags" выбираем задание или тэг
    - Нажимаем кнопку "Create a battle"
  expected-result: |
    Начинается игра с выбранным уровнем сложности

- summary: |
    Проверка выбора конкретной игры
  requirement: |
    Пользователь может выбрать конкретную игру
  prerequisites:
    Пользователь авторизован
  test-data: |
    no data
  steps:
    - Нажимаем кнопку "Create a game"
    - В "Level" выбираем уровень сложности
    - В "Game Type" выбираем "With a bot"
    - В "Time control" выставляем время игры
    - В "Choose task by name or tags" выбираем конкретную игру
    - Нажимаем кнопку "Create a battle"
  expected-result: |
    Начинается конкретная выбранная игра

- summary: |
    Проверка возможности менять язык программирования во время игры
  requirement: |
    Пользователь может изменить язык программирования во время игры
  prerequisites:
    Пользователь авторизован
    Игра запущена
  test-data: |
    no data
  steps:
    В запущенной игре в левом окне под условием задачи в выпадающем списке выбираем другой язык программирования
  expected-result: |
    Написанный код меняется в соответтствии с выбранным языком программирования

- summary: |
    Проверка вывода задач на русском и английском языках
  requirement: |
    Задачи должны быть даны русском и английском языках
  prerequisites:
    Пользователь авторизован
    Игра запущена
  test-data: |
    no data
  steps:
    - В запущенной игре проверить соответствие языка условия задачи выбранному языку
    - Сменить язык
    - Проверить соответствие языка условия задачи выбранному языку
  expected-result: |
    Условия задачи представлены на русском и английском языках, в соответствии с выбранным языком

- summary: |
    Проверка просмотра завершенной игры в записи
  requirement: |
    Завершенная игра должна быть доступна в записи
  prerequisites:
    Пользователь авторизован
    Игра завершена
  test-data: |
    no data
  steps:
    - На главной странице нажимаем на Nickname
    - Переходим в "My Profile"
    - Нажимаем "Completed Games"
    - В строчке с завершенной игрой нажимаем кнопку "Show"
    или
    - На главной странице выбираем вкладку "History"
    - В строчке с завершенной игрой нажимаем кнопку "Show"
  expected-result: |
    Пользователь просматривает завершенную игру

- summary: |
    Получение очков пользователями
  requirement: |
    Пользователи получают очки, на основе которых строятся рейтинги за неделю, месяц, всё время
  prerequisites:
    Пользователь авторизован
  test-data: |
    no data
  steps:
    - На главной странице нажимаем на Nickname
    - Переходим в "My Profile"
    - Запоминаем количество очков и рейтинг без игр
    - Запускаем игру, побеждаем
    - Сравниваем количество очков и рейтинг
  expected-result: |
    После сыгранной игры, количество очков изменяется

- summary: |
    Проверка корректности отображения статистики
  requirement: |
    Пользователи получают очки, на основе которых строятся рейтинги за неделю, месяц, всё время
  prerequisites:
    Пользователь авторизован
  test-data: |
    no data
  steps:
    - На главной странице нажимаем на Nickname
    - Переходим в Users rating
    - Поочерёдно выбираем периодичность:weekly, monthly, total
    - В каждой периодичности поочерёдно сортируем каждый показатель по возрастанию и убыванию
    - Анализируем правильность выдачи
  expected-result: |
    Таблица выводится правильно

- summary: |
    Проверка возможность следить за открытыми играми без посещения сайта, с помощью расширения для Chrome
  requirement: |
    Пользователь должен иметь возможность следить за открытыми играми без посещения сайта, с помощью расширения для Chrome
  prerequisites:
    Открыта главная страница в браузере Google Chrome
  test-data: |
    no data
  steps:
    - Нажимаем "Sing up"
    - Всплывает окно c предложением уствновить расширение игры для браузера
    - Нажимаем Install
    - Происходит редирект в расширения браузера
    - Нажимаем "Add to Chrome"
    - Нажимаем "Установить расширение"
    - Нажимаем на установленное расширение в браузере
    - Без регистрации предлагаются к просмотру игры 
  expected-result: |
    Просматриваем игру с помощью расширения, без регистрации

- summary: |
    Проверка отсутствия интернета
  requirement: |
    При внезапном отсутствии интернета сайт выдаст сообщение об этом
  prerequisites:
    Пользователь авторизован
    Запущена игра с ботом
  test-data: |
    No data
  steps:
    - Запускаем DevTools
    - Переходим на вкладку Network
    - Меняем интернет на Offline
  expected-result: |
    Сайт выдает сообщение об отсутствии интернета

- summary: |
    Проверка оптимизации скорости работы
  requirement: |
    При медленном соединении интернета, скорость работы приложения должна быть оптимизирована
  prerequisites:
    Пользователь авторизован
    Запущена игра с ботом
  test-data: |
    No data
  steps:
    - Запускаем DevTools
    - Переходим на вкладку Network
    - Меняем интернет на Slow 3G
  expected-result: |
    Сайт работает комфортно для пользователя

- summary: |
    Проверка ввода стороннего кода
  requirement: |
    Сайт должен быть безопасным
  prerequisites:
    Пользователь авторизован
    Запущена игра с ботом
  test-data: |
    No data
  steps:
    - В чате игры вводим <h1>Hello</h1>
    - Отправляем сообщение
  expected-result: |
    Отправиться должен введенный текст

- summary: |
    Проверка работы сайта в мобильной версии
  requirement: |
    При открытии сайта в мобильном устройстве, все разделы отображаются правильно, все функции работают
  prerequisites:
    Открыта главная страница с товарами на мобильном устройстве. 
    Возможно посредством DevToools:Dimensions:iPhone 12 Pro, Galaxy Z Fold 5, iPad mini
  test-data: |
    No data
  steps:
    - Просматриваем сайт до конца и по всем разделам на предмет правильного отображения и работы
  expected-result: |
    Все кнопки и разделы работают
    Верстка не поехала

- summary: |
    Проверка изменения Nickname в настройках
  requirement: |
    Пользователь должен иметь возможность менять Nickname
  prerequisites:
    Пользователь авторизован
  test-data: |
    No data
  steps:
    - На главной странице нажимаем на Nickname
    - Переходим в "Settings"
    - В поле "Your name" удаляем свой Nickname и вводим другой
    - Нажимем кнопку "Save"
    - Обновляем страницу
  expected-result: |
    Nickname изменён

- summary: |
    Проверка изменения Nickname в настройках на существующий (негативный ТК) 
  requirement: |
    Пользователь должен иметь возможность менять Nickname
  prerequisites:
    Пользователь авторизован
  test-data: |
    No data
  steps:
    - Предварительно запоминаем чужой существующий Nickname 
    - На главной странице нажимаем на Nickname
    - Переходим в "Settings"
    - В поле "Your name" удаляем свой Nickname и чужой существующий
    - Нажимем кнопку "Save"
    - Обновляем страницу
  expected-result: |
    Nickname не изменяется, выходит сообщение, что данное имя занято

- summary: |
    Проверка изменения языка программирования в настройках
  requirement: |
    Пользователь должен иметь возможность языка программирования в настройках
  prerequisites:
    Пользователь авторизован
    Язык программирования пользователя - не Kotlin
  test-data: |
    No data
  steps:
    - На главной странице нажимаем на Nickname
    - Переходим в "Settings"
    - В поле "Your weapon" меняем значение на Kotlin
    - Нажимем кнопку "Save"
  expected-result: |
    При запуске боя, в My Profile, при наведении курсора на пользователя - язык программирования пользователя - Kotlin

- summary: |
    Проверка изменения звука в настройках
  requirement: |
    Пользователь должен иметь возможность менять настройки звука
  prerequisites:
    Пользователь авторизован
  test-data: |
    No data
  steps:
    - На главной странице нажимаем на Nickname
    - Переходим в "Settings"
    - Меняем вид звука и громкость
    - Нажимем кнопку "Save"
    - Обновляем страницу
  expected-result: |
    Настройки звука изменились и сохранились

- summary: |
    Проверка редиректа на главную страницу при нажатии на плашку "Codebattle by Hexlet's community"
  requirement: |
    Плашка "Codebattle by Hexlet's community" должна перенаправлять на главный экран
  prerequisites:
    Пользователь авторизован
    Находится в личном профиле
  test-data: |
    No data
  steps:
    - Нажимаем на плашку "Codebattle by Hexlet's community"
  expected-result: |
    Происходит редикрект на главную страницу